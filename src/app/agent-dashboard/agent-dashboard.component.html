<div class="flex h-screen">
  <!-- Sidebar -->
  <aside class="w-64 text-white p-4 hidden md:block" style="background-color: #82D99B;">
    <h2 class="text-xl font-semibold mb-6">Agent Panel</h2>
    <nav class="flex flex-col gap-3">
      <button type="button" [routerLink]="['/agent-dashboard']" class="hover:bg-white hover:bg-opacity-20 p-2 rounded transition-colors w-full text-left">ðŸ“… Vue Calendrier</button>
      <button type="button" [routerLink]="['/mes-taches']" class="hover:bg-white hover:bg-opacity-20 p-2 rounded transition-colors w-full text-left">ðŸ“‹ Mes TÃ¢ches</button>
    </nav>
  </aside>

  <!-- Main content -->
  <div class="flex-1 flex flex-col">
    <!-- Header -->
    <header class="bg-white shadow p-4 flex justify-between items-center">
      <h1 class="text-xl font-bold">Tableau de bord</h1>
      <button class="text-red-500 font-semibold hover:underline">DÃ©connexion</button>
    </header>

    <!-- Content -->
    <main class="p-6 overflow-auto">
      <!-- Bouton CrÃ©er une tÃ¢che -->
      <div class="mb-4 flex justify-end">
        <button
          (click)="showForm = !showForm"
          class="text-white px-4 py-2 rounded hover:opacity-90 transition-opacity"
          style="background-color: #99B1E8;"
        >
          {{ showForm ? 'Annuler' : 'CrÃ©er une tÃ¢che' }}
        </button>
      </div>

      <!-- Formulaire de crÃ©ation -->
      <div *ngIf="showForm" class="bg-white p-6 rounded shadow-md max-w-xl mx-auto mb-6">
        <form (ngSubmit)="createTask()" #taskForm="ngForm">
          <div class="mb-4">
            <label class="block font-medium mb-1">Titre</label>
            <input
              [(ngModel)]="task.title"
              name="title"
              required
              class="w-full border rounded p-2"
            />
          </div>

          <div class="mb-4">
            <label class="block font-medium mb-1">Description</label>
            <textarea
              [(ngModel)]="task.description"
              name="description"
              rows="3"
              class="w-full border rounded p-2"
            ></textarea>
          </div>

          <div class="mb-4 grid grid-cols-2 gap-4">
            <div>
              <label class="block font-medium mb-1">Date de dÃ©but</label>
              <input
                [(ngModel)]="task.startDate"
                name="startDate"
                type="date"
                class="w-full border rounded p-2"
              />
            </div>

            <div>
              <label class="mb-1 block font-medium">DurÃ©e (heures)</label>
              <input
                [(ngModel)]="task.duration"
                name="duration"
                type="number"
                min="1"
                class="w-full border rounded p-2"
              />
            </div>
          </div>

          <div class="mb-4">
            <label class="block font-medium mb-1">PrioritÃ©</label>
            <select
              [(ngModel)]="task.priority"
              name="priority"
              class="w-full border rounded p-2"
            >
              <option value="Haute">Haute</option>
              <option value="Moyenne">Moyenne</option>
              <option value="Basse">Basse</option>
            </select>
          </div>

          <button
            type="submit"
            [disabled]="taskForm.invalid"
            class="text-white px-4 py-2 rounded hover:opacity-90 transition-opacity"
            style="background-color: #99B1E8;"
          >
            Valider
          </button>
        </form>
      </div>

      <!-- Liste des tÃ¢ches -->
      <!-- (SUPPRIMÃ‰: affichage des cartes Mes TÃ¢ches ici) -->

      <!-- Calendrier FullCalendar -->
      <div class="bg-white p-6 rounded shadow">
        <h3 class="text-lg font-semibold mb-4">Calendrier des TÃ¢ches</h3>
        <div *ngIf="isBrowser">
          <full-calendar [options]="calendarOptions"></full-calendar>
        </div>
        <div *ngIf="!isBrowser" class="border border-dashed border-gray-400 p-8 text-center rounded-lg">
          <p class="text-gray-500 italic">Chargement du calendrier...</p>
        </div>
      </div>
    </main>
  </div>
</div>
